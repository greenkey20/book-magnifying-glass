const storyData = [
    {
        title: '1. 옥상의 성찰',
        score: 2,
        icon: '🏙️',
        imageUrl: 'https://github.com/greenkey20/book-magnifying-glass/blob/main/images/01%201BA65A24-E5E9-40C8-BB09-098F0378B32A.png',
        content: `어느 평일 저녁, 개발자 초록토끼는 회사 옥상에 올라가 도시의 네온사인들이 반짝이는 스카이라인을 내려다보고 있었다. 손 안의 작은 하얀 곰인형 트롬을 가만히 쓰다듬으며, 탁 트인 시야 너머로 펼쳐진 도시를 바라보았다.<br><br>"트롬아, 나는 잘 살고 있는 걸까? 이 <span class="highlight-dev">반복되는 코드</span>처럼, 내 삶도 예측 가능한 루틴 속에 갇혀버린 건 아닐까?" 초록토끼가 조용히 물었다.<br><br>이 높이에서 바라보는 도시는 아름다웠지만, 마음 한구석엔 무언가 채워지지 않는 공허함이 있었다. 매일 반복되는 코딩, 끝없는 프로젝트, 불확실한 미래에 대한 불안감들이 저녁 하늘 위로 흩어져 갔다. 마치 <span class="highlight-dev">디버깅되지 않은 오류 코드</span>처럼, 마음속 문제가 해결되지 않은 채 맴돌았다.<br><br>"내일은 조금 다른 하루가 되었으면 좋겠어. 이 <span class="highlight-dev">시스템을 리부팅하듯</span>, 새로운 변화를 맞이하고 싶어." 초록토끼가 트롬을 품에 안으며 중얼거렸다. 차가운 바람이 불어왔지만, 마음만은 새로운 변화를 갈망하고 있었다.`
            },
            {
                title: '2. 산토리니의 환상',
                score: 4,
                icon: '🛁',
                imageUrl: 'images/02.png',
                content: `어느 저녁, 초록토끼는 피로를 풀기 위해 따뜻한 물을 받아놓고 욕조에 몸을 담갔다. 트롬을 욕실 선반에 앉혀두고 눈을 감자, 어느새 피로가 몰려오며 선잠에 빠져들었다.<br><br>그 순간 마음속에는 칼데라를 둘러싼 하얀 건물들과 파란 돔이 에게해 위로 석양을 맞이하는 산토리니가 펼쳐졌다. 욕조는 어느새 깊푸른 바다가 되어 있었고, 초록토끼는 하얀 여름 드레스를 입고 돌계단을 내려가고 있었다.<br><br>"누나, 여기 정말 예뻐! 바다가 이렇게 아름다울 수 있구나." 트롬이 초록토끼의 품에서 감탄하며 말했다.<br><br>"그렇지, 트롬아. 매일 보던 욕조가 이렇게 바다가 될 수 있다니, 놀랍지? 마치 평범한 일상에 새로운 <span class="highlight-dev">플러그인</span>을 설치한 것 같아." 초록토끼가 에게해의 바닷바람을 맞으며 답했다. "아, 평범한 일상도 새로운 시선으로 바라보는 모험이 시작되는 것 같아. 고정된 프레임을 벗어나 새로운 관점으로 세상을 볼 용기가 생기는구나."<br><br>석양이 칼데라 위로 황금빛을 쏟아내던 순간, 욕조 물의 따뜻한 온기가 피부에 더욱 선명하게 와닿았다. 그제야 초록토끼는 자신이 욕조에 몸을 담그고 있음을 깨달았다. 하지만 마음속에는 에게해의 평온함이 깊이 새겨져 있었다. 새로운 모험이 시작되듯이 일상의 사물을 새로운 관점으로 보기로 다짐했다.`
            },
            {
                title: '3. 파리의 아침',
                score: 5,
                icon: '🥐',
                imageUrl: 'images/03.png',
                content: `며칠 뒤, 평화로운 아침을 맞은 초록토끼는 간단한 식사를 준비했다. 식탁에 트롬을 앉혀두고 갓 구운 바게트를 썰던 중, 문득 그 길쭉한 빵에서 파리지앵처럼 여유롭게 아침을 음미하는 예술적 감성이 떠올랐다.<br><br>마음속 풍경에서 바게트는 샹젤리제 거리가 되었고, 초록토끼는 검은 베레모를 쓰고 그 위를 산책하고 있었다. 작은 에펠탑이 빵 끝에 서 있고, 미니어처 카페에서는 향긋한 커피 냄새가 피어올랐다.<br><br>"누나, 이 빵 정말 맛있어 보여!" 트롬이 초록토끼의 한 팔에 안겨 말했다.<br><br>"맞아, 트롬아. 그런데 가장 맛있는 건 이렇게 함께 먹는 거야. 마치 <span class="highlight-dev">분산된 데이터베이스를 하나로 통합</span>한 것처럼, 함께하는 순간이 모든 가치를 더해주는 것 같아." 초록토끼가 미소 지으며 답했다. "파리 사람들도 아마 우리처럼 소중한 사람과 함께 여유로운 아침을 먹을 거야."<br><br>코끝에 갓 내린 커피의 진한 향이 스며들고, 동시에 토스터에서 빵이 튀어 오르는 '탁' 소리가 들려왔다. 초록토끼는 눈을 떴다. 파리의 아침은 사라졌지만, 커피 향 가득한 평범한 아침 식탁이 그 어느 때보다 아름답게 느껴졌다.`
            },
            {
                title: '4. 호이안의 소원',
                score: 6,
                icon: '🏮',
                imageUrl: 'images/04.png',
                content: `또 다른 평일 오후, 초록토끼는 사무실에서 잠시 평범하지만 소중한 커피 타임을 가지고 있었다. 책상 한편에 앉아있는 트롬을 바라보며 커피 잔을 들어 올리자, 그 안에서 천 년 역사가 흐르는 투본강에 소원을 띄우며 영원을 꿈꾸는 호이안의 장면이 펼쳐졌다.<br><br>"누나, 어떤 소원을 빌고 있어?" 트롬이 호기심 어린 눈으로 물었다.<br><br>"내가 진짜 원하는 게 뭔지, 어떤 삶을 살고 싶은지 명확해졌으면 좋겠어. 마치 복잡하게 얽힌 코드 속에서 <span class="highlight-dev">핵심 로직을 찾아내듯</span>, 내 삶의 본질적인 목표를 찾고 싶어." 초록토끼가 등불을 조심스럽게 물에 띄우며 말했다.<br><br>"그럼 소원이 이루어질까?" 트롬이 기대에 찬 목소리로 물었다.<br><br>"역사의 흐름처럼 천천히, 하지만 분명히 이루어질 거야. 모든 데이터가 결국 하나의 결과로 수렴하듯이."<br><br>등불을 물에 띄우며 초록토끼는 마음속으로 확고히 다짐했다. '그래, 나는 내가 원하는 삶을 만들어갈 수 있어. 이 다짐이 곧 나의 새로운 시작점이야.' 그 순간, 커피 잔의 온기가 손끝에 선명하게 느껴지며 그녀는 현실로 돌아왔다. 손안의 수첩을 펼쳐들고, 그녀는 더 이상 망설이지 않고 목표를 적어 내려갔다. 마음속에 새로운 <span class="highlight-dev">API 문서</span>가 생긴 듯, 명확한 방향성이 느껴졌다.`
            },
            {
                title: '5. 개발자의 밤',
                score: 6.5,
                icon: '💻',
                imageUrl: 'images/05.png',
                content: `어느 날 밤, 호이안에서의 다짐을 되새기며 초록토끼는 밤늦도록 책상에 앉아 있었다. 오늘 작업했던 코드들을 다시 살펴보며 회고록을 작성하던 중, 라즈베리 파이 보드를 손에 들자 그 작은 기판 위로 빛나는 디지털 미로가 펼쳐졌다.<br><br>마음속 풍경에서 초록토끼는 작은 개발자 안경을 쓰고 코드의 미로를 헤치고 있었다.<br><br>"누나, 이 길은 정말 복잡해 보여! 마치 끝없는 <span class="highlight-dev">재귀 함수</span> 같아." 트롬이 조심스럽게 물었다.<br><br>"괜찮아, 트롬아. 처음엔 어렵지만, 한 줄 한 줄 따라가다 보면 새로운 길이 보일 거야. 이 미로를 풀면 더 큰 세상을 만들 수 있거든. 마치 새로운 <span class="highlight-dev">알고리즘</span>을 발견하듯, 내 지식의 영역을 확장하는 기분이야."<br><br>환상에서 벗어난 초록토끼는 라즈베리 파이를 다시 내려놓았다. 오늘 하루의 성과를 되짚고, 현재 자신의 성장이 어떤 방향으로 나아가고 있는지 성찰했다. 마치 잘 짜인 <span class="highlight-dev">테스트 코드</span>처럼, 자신의 성장이 유효한지 검증하는 시간이었다. 그녀는 다시 모니터를 응시하며, 다음 주 프로젝트의 아이디어와 오늘 얻은 깨달음을 노트에 끄적였다.`
            },
            {
                title: '6. 스웨덴 숲의 그리움',
                score: 5.5,
                icon: '🌳',
                imageUrl: 'images/06.png',
                content: `바쁜 일상 속, 퇴근 시간 즈음 목과 어깨가 뻐근해진 초록토끼는 자리에서 일어나 가벼운 스트레칭을 했다. 사무실 한켠의 몬스테라 화분을 바라보니, 라곰처럼 균형 잡힌 마음으로 자연과 하나되는 스웨덴 숲의 고요함이 떠올랐다.<br><br>마음속 풍경에서 화분은 깊은 숲이 되었다. 맑은 호숫가 저쪽 노란 텐트 근처에서는 캠프파이어가 따뜻하게 타오르고 있었다. 코알라 왕자가 따뜻한 미소를 지으며 다가왔다.<br><br>금세 어색함을 덜어낸 초록토끼와 트롬은 코알라 왕자의 안내로 함께 카누를 탔다. "누나, 이렇게 셋이 함께 있으니까 좋아." 트롬이 코알라 왕자를 보며 기뻐했다.<br><br>고요한 호수를 바라보며 초록토끼는 생각했다. 혼자인 지금도 충분히 의미 있지만, 때로는 진정으로 이해하고 사랑할 수 있는 사람에 대한 그리움이 마음 한구석에서 피어오른다는 것을. 마치 <span class="highlight-dev">분리된 모듈</span>처럼, 온전하지만 어딘가 연결되지 못한 허전함이었다.<br><br>그때 창문으로 불어온 바람에 몬스테라 잎이 살랑 움직이자, 초록토끼는 현실로 돌아왔다. 아무도 보지 않는 사무실에서 혼자 예쁜 미소를 연습해보았다.`
            },
            {
                title: '7. 런던의 긍정',
                score: 7,
                icon: '☔',
                imageUrl: 'images/07.png',
                content: `어느 주말 아침, 자명종 소리에 일찍 눈을 뜬 초록토끼. 창밖으로 보슬비가 내리고 있었다. 침대 맡 트롬을 안고 자명종 시계를 바라보니, 그 투명한 시계 면 속에서 런던이 펼쳐졌다.<br><br>"누나, 비가 와서 조금 우울해." 트롬이 작은 목소리로 말했다.<br><br>"그렇구나, 트롬아. 하지만 비는 모든 걸 씻어내고 새롭게 만들어줘. 마치 <span class="highlight-dev">시스템을 재부팅하듯</span>, 마음을 깨끗하게 정화하는 시간이야. 전통과 현대가 함께 어우러지는 이 도시처럼, 우울함과 희망도 함께 존재할 수 있어. 이 감정의 이분법을 넘어 조화를 이룰 수 있다면."<br><br>초록토끼는 마음먹었다. 흐린 날에도 마음은 맑을 수 있다는 것을. 이 감정의 흐름을 이해하는 것이야말로 진정한 <span class="highlight-dev">긍정의 알고리즘</span> 같았다. 시계의 초침 소리가 또렷하게 들려왔다. '똑, 딱, 똑, 딱.' 그 규칙적인 소리가 런던의 비와 어우러지며, 초록토끼는 눈을 떴다. 비는 여전히 내렸지만, 마음은 한결 가벼웠다. 그래서 비가 내림에도 불구하고 우산을 쓰고 나가보기로 했다.`
            },
            {
                title: '8. 온천의 휴식',
                score: 7.5,
                icon: '♨️',
                imageUrl: 'images/08.png',
                content: `주말 오후, 혼자 산책하다 새롭게 발견한 동네 카페에 들어간 초록토끼. 한켠에 놓인 원형 고양이 침대를 바라보니, 온천의 따뜻함 속에서 마음을 성찰하고 정화하는 일본 온천이 떠올랐다.<br><br>"누나, 이렇게 따뜻한 물에 있으니까 마음이 편해져." 트롬이 만족스럽게 말했다.<br><br>"맞아, 트롬아. 나만의 속도로 쉬는 것도 중요해. 마치 <span class="highlight-dev">과부하된 서버를 잠시 멈추고 재정비</span>하는 것과 같지. 이 시간은 <span class="highlight-dev">내면의 데이터를 정리하고 최적화</span>하는 과정이야."<br><br>온천 물의 따뜻함이 전신을 감싸고, 잔잔하게 흐르는 물소리가 귀를 채웠다. 초록토끼는 눈을 감았다. 몸과 마음의 긴장이 풀리면서, 마치 <span class="highlight-dev">새로운 세션</span>이 시작되는 것처럼 개운함을 느꼈다.<br><br>온천 환상에서 벗어난 초록토끼는 노이즈 캔슬링 이어폰을 착용하고 개인만의 명상 시간을 가졌다. 자기 돌봄이 더 나은 내일을 위한 투자라는 걸 깨달으며.`
            },
            {
                title: '9. 서핑의 용기',
                score: 8.5,
                icon: '🏄‍♀️',
                imageUrl: 'images/09.png',
                content: `집에 돌아온 초록토끼는 목이 말라 시원한 물 한 잔을 마셨다. 초록빛 머그컵에 물을 따르는 순간, 그 안에서 파도의 역동적 에너지를 온몸으로 받아내는 서핑의 세계가 솟구쳐 올랐다.<br><br>"누나, 그 파도 정말 커! 무서워. 마치 예측 불가능한 <span class="highlight-dev">시스템 오류</span> 같아." 트롬이 걱정스럽게 말했다.<br><br>"괜찮아, 트롬아. 서핑할 때는 파도의 리듬을 잘 관찰하고, 그 흐름에 맞춰 균형을 잡으면 돼. 모든 변화에 적응하는 <span class="highlight-dev">유연한 코드</span>를 짜는 것처럼."<br><br>물방울이 송글 맺힌 물컵에서 초록토끼의 손으로 물이 떨어지며 초록토끼는 현실로 돌아왔다. 일과 공부 사이에도 리듬을 찾아 균형을 잡으면 된다고, 재충전 후에 찾아오는 용기는 더욱 단단하다고 생각했다. 마치 복잡한 프로젝트를 성공적으로 <span class="highlight-dev">배포</span>한 후의 성취감처럼, 새로운 도전에 대한 확신이 차올랐다. 초록토끼는 일기장을 펼쳐 일과 공부로 바쁜 일상에서 시간 균형을 잡고 새롭게 해볼 것들을 정리해서 적었다.`
            },
            {
                title: '10. 공부방의 현재',
                score: 9,
                icon: '📚',
                imageUrl: 'images/10.png',
                content: `그렇게 여러 환상과 경험을 거쳐, 초록토끼는 쌓여온 경험들이 스며든 나만의 안전하고 익숙한 공간인 책상 앞에 앉았다.<br><br>"누나, 오늘도 공부해?" 트롬이 조용히 물었다.<br><br>"응, 트롬아. 나만의 속도로 성장하기 위해서. 마치 나만의 <span class="highlight-dev">데이터베이스를 꾸준히 업데이트</span>하는 것처럼. 오늘 하루를 통해 깨달았어. 꿈을 꾸는 것도 중요하지만, 지금 이 순간 충실히 사는 것도 똑같이 중요하다는 걸. 현재의 노력이 미래의 큰 그림을 위한 작은 <span class="highlight-dev">커밋(commit)</span>이라는 걸 이제는 알아."<br><br>"나도 누나를 응원할게."<br><br>"고마워, 트롬아. 혼자 있는 시간도 이렇게 의미 있게 보낼 수 있어서 다행이야."<br><br>초록토끼는 미소 지으며 교재를 바라봤다. 마음속 모험들이 결국 현재를 더욱 풍요롭게 만들어준다는 것을.`
            },
            {
                title: '11. 우주의 꿈',
                score: 10,
                icon: '🚀',
                imageUrl: 'images/11.png',
                content: `한참 집중해서 공부하다 문득 책상 램프를 바라보니, 그 둥근 갓 안에서 은하수 너머 무한한 가능성들이 경이롭게 펼쳐지는 우주가 보였다. 미래의 초록토끼가 은빛 우주복을 입고 우주선 조종석에 앉아 있었다.<br><br>옆자리에는 코알라 왕자가 부조종사로 앉아 있었다.<br><br>"누나, 우리 정말 저기까지 갈 수 있을까? 이 거대한 시스템의 끝은 어디일까?"<br><br>"물론이야, 트롬아. 지금은 작은 걸음이지만, 언젠가는 정말 큰 꿈도 이룰 수 있을 거야. 마치 작은 <span class="highlight-dev">오픈소스 프로젝트가 거대한 생태계</span>를 이루듯, 우리의 노력도 그렇게 될 거야."<br><br>그 따뜻한 온기가 손끝에 선명하게 느껴졌다. 책상 램프의 미세한 '윙' 소리가 현실의 고요함을 일깨웠다. 초록토끼는 눈을 떴다. 우주의 광활함은 사라졌지만, 눈앞의 작은 책상과 그 위를 비추는 램프가 더욱 소중하게 다가왔다.<br><br>상변화에는 잠열이 필요하듯, 내 인생의 변화에도 지금 보이지 않는 에너지가 축적되고 있는 거겠지. 언젠가 임계점에 도달하면, 확 바뀔 수 있을 거야. 마치 안정화된 <span class="highlight-dev">배포(deployment)</span>처럼. 초록토끼는 분명히 알았다. 이 모든 과정이 나를 '<span class="highlight-dev">풀 스택</span>'으로 성장시키는 여정임을 확신했다.`
            }
        ];

        let growthChart;
        let activeIndex = 0;

        document.addEventListener('DOMContentLoaded', () => {
            const navList = document.getElementById('navList');

            storyData.forEach((story, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <a href="#" data-index="${index}" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-100 transition-all duration-300 border-l-4 border-transparent">
                        <span class="text-xl mr-3">${story.icon}</span>
                        <span class="font-medium text-gray-700">${story.title}</span>
                    </a>
                `;
                navList.appendChild(li);
            });

            navList.addEventListener('click', (e) => {
                e.preventDefault();
                const link = e.target.closest('a');
                if (link && link.dataset.index) {
                    activeIndex = parseInt(link.dataset.index, 10);
                    updateContent(activeIndex);
                }
            });

            initChart();
            updateContent(0);
        });

        function updateContent(index) {
            const story = storyData[index];
            document.getElementById('storyTitle').textContent = story.title;
            
            const storyImageContainer = document.getElementById('storyImageContainer');
            storyImageContainer.innerHTML = ''; // 이전 이미지 제거

            if (story.imageUrl) {
                const img = document.createElement('img');
                img.src = story.imageUrl;
                img.alt = story.title + ' 이미지';
                img.className = 'w-full h-auto max-h-[300px] object-cover rounded-lg shadow-md mx-auto block'; // 반응형 이미지 스타일링
                storyImageContainer.appendChild(img);
            }

            document.getElementById('storyText').innerHTML = story.content;
            
            document.querySelectorAll('.nav-item').forEach((item, i) => {
                if (i === index) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            updateChartHighlight(index);
        }

        function initChart() {
            const ctx = document.getElementById('growthChart').getContext('2d');
            const labels = storyData.map(d => d.title.split('. ')[1]);
            const data = storyData.map(d => d.score);

            growthChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '성장 점수',
                        data: data,
                        fill: true,
                        backgroundColor: 'rgba(139, 195, 74, 0.1)',
                        borderColor: '#689f38',
                        borderWidth: 2,
                        pointBackgroundColor: '#ffffff',
                        pointBorderColor: '#689f38',
                        pointBorderWidth: 2,
                        pointRadius: 5,
                        pointHoverRadius: 8,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 10,
                            ticks: {
                                color: '#4b5563'
                            },
                            grid: {
                                color: '#e5e7eb'
                            }
                        },
                        x: {
                           ticks: {
                                color: '#4b5563',
                                maxRotation: 45, // Set rotation to 45 degrees to prevent overlap
                                minRotation: 0, // Allow minimum rotation to be 0
                                callback: function(value, index, values) {
                                    const label = this.getLabelForValue(value);
                                    // Removed truncation logic to display full labels
                                    return label;
                                }
                            },
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            enabled: true,
                            backgroundColor: '#1f2937',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            callbacks: {
                                title: (context) => context[0].label,
                                label: (context) => `성장 점수: ${context.raw}`
                            }
                        }
                    },
                    onClick: (e, elements) => {
                        if (elements.length > 0) {
                            const dataIndex = elements[0].index;
                            activeIndex = dataIndex;
                            updateContent(activeIndex);
                        }
                    }
                }
            });
        }
        
        function updateChartHighlight(index) {
            if (!growthChart) return;
            const dataset = growthChart.data.datasets[0];
            const pointRadii = new Array(dataset.data.length).fill(5);
            const pointBackgroundColors = new Array(dataset.data.length).fill('#ffffff');

            pointRadii[index] = 8;
            pointBackgroundColors[index] = '#c5e1a5';
            
            dataset.pointRadius = pointRadii;
            dataset.pointBackgroundColor = pointBackgroundColors;
            
            growthChart.update();
        }
        
        window.addEventListener('resize', () => {
             if (growthChart) {
                growthChart.options.scales.x.ticks.callback = function(value, index, values) {
                    const label = this.getLabelForValue(value);
                    // Removed truncation logic to display full labels
                    return label;
                };
                growthChart.update();
             }
        });